{"version":3,"file":"index.js","sources":["../dist-src/tm-splash-screen.js"],"sourcesContent":["import { html } from 'lit-html';\nimport { LitElement, css } from 'lit-element';\nimport '@wonkytech/tm-firebase-user';\ndocument.addEventListener('user-logged-in', () => console.log('AAAAAAAAAAAAAAAA'));\nwindow.customElements.define('tm-splash-screen', class extends LitElement {\n  // noinspection JSUnusedGlobalSymbols\n  static get properties() {\n    return {\n      heading: {\n        type: String\n      },\n      login: {\n        type: Boolean\n      },\n      config: {\n        type: Object\n      },\n      waitFor: {\n        type: Array\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.heading = '';\n    this.login = false;\n    this.config = undefined;\n    this.waitFor = undefined;\n  }\n\n  firstUpdated(_changedProperties) {\n    this.splash = this.shadowRoot.getElementById('splash');\n    const {\n      waitFor\n    } = this;\n\n    if (waitFor) {\n      Promise.all(waitFor.map(name => customElements.whenDefined(name))).then(() => console.log('TM-SPLASH-SCREEN: application good to go.'));\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (this.login) {\n      this._loginListener = () => this.hide();\n\n      this._logoutListener = () => this.show();\n\n      document.addEventListener('user-logged-in', this._loginListener);\n      document.addEventListener('user-logged-out', this._logoutListener);\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this.login) {\n      document.removeEventListener('user-logged-in', this._loginListener);\n      document.removeEventListener('user-logged-out', this._logoutListener);\n      this._loginListener = undefined;\n      this._logoutListener = undefined;\n    }\n  }\n\n  static get styles() {\n    // language=CSS\n    return css`\n            :host {\n            }\n            \n            .container {\n                position: absolute;\n                left: 0;\n                top: 0;\n                /*noinspection CssUnresolvedCustomProperty*/\n                background: var(--tm-splash-screen-background, white);\n                width: 100vw;\n                height: 100vh;\n                box-sizing: border-box;\n                display: flex;\n                flex-direction: row;\n                justify-content: center;\n                z-index:1000000;\n            }\n\n            .body {\n                box-sizing: border-box;\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n            }\n\n            tm-firebase-user {\n                /*noinspection CssUnresolvedCustomProperty*/\n                --tm-firebase-user-color: var(--tm-splash-screen-color, gray);\n                margin-left: auto;\n                margin-right: auto;\n            }\n\n            .message {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                margin-bottom: 40px;\n            }\n\n            .body > h1 {\n                text-align: center;\n                margin-top: 0;\n                /*noinspection CssUnresolvedCustomProperty*/\n                color: var(--tm-splash-screen-color, gray);\n            }\n\n            ::slotted(*) {\n                margin-left: auto;\n                margin-right: auto;\n            }\n\n            .hidden {\n                display: none;\n            }\n\n        `;\n  } // noinspection JSUnusedGlobalSymbols\n\n\n  render() {\n    const {\n      heading\n    } = this;\n    return html`\n            <div id=\"splash\" class=\"container\">\n                <div class=\"body\">\n                    <h1>${heading}</h1>\n                    <div class=\"message\">\n                        <slot></slot>\n                    </div>\n                    ${this.addLoginIfRequired()}\n                </div>\n            </div>\n        `;\n  }\n\n  addLoginIfRequired() {\n    const {\n      login,\n      config\n    } = this;\n\n    if (login) {\n      if (config) {\n        return html`<tm-firebase-user id=\"login\" .config=\"${config}\"></tm-firebase-user>`;\n      } else {\n        return html`<tm-firebase-user id=\"login\"></tm-firebase-user>`;\n      }\n    } else {\n      return html``;\n    }\n  }\n\n  logout() {\n    this.show();\n\n    if (this.login) {\n      this.shadowRoot.getElementById('login').logout();\n    }\n  }\n\n  show() {\n    const {\n      splash\n    } = this;\n    splash.classList.remove('hidden');\n  }\n\n  hide() {\n    const {\n      splash\n    } = this;\n    splash.classList.add('hidden');\n  }\n\n});"],"names":[],"mappings":";;;;AAGA,QAAQ,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,MAAM,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,CAAC;AACnF,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,kBAAkB,EAAE,cAAc,UAAU,CAAC;;EAExE,WAAW,UAAU,GAAG;IACtB,OAAO;MACL,OAAO,EAAE;QACP,IAAI,EAAE,MAAM;OACb;MACD,KAAK,EAAE;QACL,IAAI,EAAE,OAAO;OACd;MACD,MAAM,EAAE;QACN,IAAI,EAAE,MAAM;OACb;MACD,OAAO,EAAE;QACP,IAAI,EAAE,KAAK;OACZ;KACF,CAAC;GACH;;EAED,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;IACR,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IAClB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACnB,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;IACxB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;GAC1B;;EAED,YAAY,CAAC,kBAAkB,EAAE;IAC/B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IACvD,MAAM;MACJ,OAAO;KACR,GAAG,IAAI,CAAC;;IAET,IAAI,OAAO,EAAE;MACX,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,OAAO,CAAC,GAAG,CAAC,2CAA2C,CAAC,CAAC,CAAC;KACzI;GACF;;EAED,iBAAiB,GAAG;IAClB,KAAK,CAAC,iBAAiB,EAAE,CAAC;;IAE1B,IAAI,IAAI,CAAC,KAAK,EAAE;MACd,IAAI,CAAC,cAAc,GAAG,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;;MAExC,IAAI,CAAC,eAAe,GAAG,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;;MAEzC,QAAQ,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;MACjE,QAAQ,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;KACpE;GACF;;EAED,oBAAoB,GAAG;IACrB,KAAK,CAAC,oBAAoB,EAAE,CAAC;;IAE7B,IAAI,IAAI,CAAC,KAAK,EAAE;MACd,QAAQ,CAAC,mBAAmB,CAAC,gBAAgB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;MACpE,QAAQ,CAAC,mBAAmB,CAAC,iBAAiB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;MACtE,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;MAChC,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC;KAClC;GACF;;EAED,WAAW,MAAM,GAAG;;IAElB,OAAO,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAwDP,CAAC,CAAC;GACP;;;EAGD,MAAM,GAAG;IACP,MAAM;MACJ,OAAO;KACR,GAAG,IAAI,CAAC;IACT,OAAO,IAAI,CAAC;;;wBAGQ,EAAE,OAAO,CAAC;;;;oBAId,EAAE,IAAI,CAAC,kBAAkB,EAAE,CAAC;;;QAGxC,CAAC,CAAC;GACP;;EAED,kBAAkB,GAAG;IACnB,MAAM;MACJ,KAAK;MACL,MAAM;KACP,GAAG,IAAI,CAAC;;IAET,IAAI,KAAK,EAAE;MACT,IAAI,MAAM,EAAE;QACV,OAAO,IAAI,CAAC,sCAAsC,EAAE,MAAM,CAAC,qBAAqB,CAAC,CAAC;OACnF,MAAM;QACL,OAAO,IAAI,CAAC,gDAAgD,CAAC,CAAC;OAC/D;KACF,MAAM;MACL,OAAO,IAAI,CAAC,CAAC,CAAC;KACf;GACF;;EAED,MAAM,GAAG;IACP,IAAI,CAAC,IAAI,EAAE,CAAC;;IAEZ,IAAI,IAAI,CAAC,KAAK,EAAE;MACd,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC;KAClD;GACF;;EAED,IAAI,GAAG;IACL,MAAM;MACJ,MAAM;KACP,GAAG,IAAI,CAAC;IACT,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;GACnC;;EAED,IAAI,GAAG;IACL,MAAM;MACJ,MAAM;KACP,GAAG,IAAI,CAAC;IACT,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;GAChC;;CAEF,CAAC"}