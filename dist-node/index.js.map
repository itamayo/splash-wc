{"version":3,"file":"index.js","sources":["../dist-src/tm-splash-screen.js"],"sourcesContent":["import { html } from 'lit-html';\nimport { LitElement, css } from 'lit-element';\nimport '@wonkytech/tm-firebase-user';\ndocument.addEventListener('user-logged-in', () => console.log('AAAAAAAAAAAAAAAA'));\nwindow.customElements.define('tm-splash-screen', class extends LitElement {\n  // noinspection JSUnusedGlobalSymbols\n  static get properties() {\n    return {\n      heading: {\n        type: String\n      },\n      login: {\n        type: Boolean\n      },\n      config: {\n        type: Object\n      },\n      waitFor: {\n        type: Array\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.heading = '';\n    this.login = false;\n    this.config = undefined;\n    this.waitFor = undefined;\n  }\n\n  firstUpdated(_changedProperties) {\n    this.splash = this.shadowRoot.getElementById('splash');\n    const {\n      waitFor\n    } = this;\n\n    if (waitFor) {\n      Promise.all(waitFor.map(name => customElements.whenDefined(name))).then(() => console.log('TM-SPLASH-SCREEN: application good to go.'));\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (this.login) {\n      this._loginListener = () => this.hide();\n\n      this._logoutListener = () => this.show();\n\n      document.addEventListener('user-logged-in', this._loginListener);\n      document.addEventListener('user-logged-out', this._logoutListener);\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this.login) {\n      document.removeEventListener('user-logged-in', this._loginListener);\n      document.removeEventListener('user-logged-out', this._logoutListener);\n      this._loginListener = undefined;\n      this._logoutListener = undefined;\n    }\n  }\n\n  static get styles() {\n    // language=CSS\n    return css`\n            :host {\n            }\n            \n            .container {\n                position: absolute;\n                left: 0;\n                top: 0;\n                /*noinspection CssUnresolvedCustomProperty*/\n                background: var(--tm-splash-screen-background, white);\n                width: 100vw;\n                height: 100vh;\n                box-sizing: border-box;\n                display: flex;\n                flex-direction: row;\n                justify-content: center;\n                z-index:1000000;\n            }\n\n            .body {\n                box-sizing: border-box;\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n            }\n\n            tm-firebase-user {\n                /*noinspection CssUnresolvedCustomProperty*/\n                --tm-firebase-user-color: var(--tm-splash-screen-color, gray);\n                margin-left: auto;\n                margin-right: auto;\n            }\n\n            .message {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                margin-bottom: 40px;\n            }\n\n            .body > h1 {\n                text-align: center;\n                margin-top: 0;\n                /*noinspection CssUnresolvedCustomProperty*/\n                color: var(--tm-splash-screen-color, gray);\n            }\n\n            ::slotted(*) {\n                margin-left: auto;\n                margin-right: auto;\n            }\n\n            .hidden {\n                display: none;\n            }\n\n        `;\n  } // noinspection JSUnusedGlobalSymbols\n\n\n  render() {\n    const {\n      heading\n    } = this;\n    return html`\n            <div id=\"splash\" class=\"container\">\n                <div class=\"body\">\n                    <h1>${heading}</h1>\n                    <div class=\"message\">\n                        <slot></slot>\n                    </div>\n                    ${this.addLoginIfRequired()}\n                </div>\n            </div>\n        `;\n  }\n\n  addLoginIfRequired() {\n    const {\n      login,\n      config\n    } = this;\n\n    if (login) {\n      if (config) {\n        return html`<tm-firebase-user id=\"login\" .config=\"${config}\"></tm-firebase-user>`;\n      } else {\n        return html`<tm-firebase-user id=\"login\"></tm-firebase-user>`;\n      }\n    } else {\n      return html``;\n    }\n  }\n\n  logout() {\n    this.show();\n\n    if (this.login) {\n      this.shadowRoot.getElementById('login').logout();\n    }\n  }\n\n  show() {\n    const {\n      splash\n    } = this;\n    splash.classList.remove('hidden');\n  }\n\n  hide() {\n    const {\n      splash\n    } = this;\n    splash.classList.add('hidden');\n  }\n\n});"],"names":["document","addEventListener","console","log","window","customElements","define","LitElement","properties","heading","type","String","login","Boolean","config","Object","waitFor","Array","constructor","undefined","firstUpdated","_changedProperties","splash","shadowRoot","getElementById","Promise","all","map","name","whenDefined","then","connectedCallback","_loginListener","hide","_logoutListener","show","disconnectedCallback","removeEventListener","styles","css","render","html","addLoginIfRequired","logout","classList","remove","add"],"mappings":";;;;;;AAGAA,QAAQ,CAACC,gBAAT,CAA0B,gBAA1B,EAA4C,MAAMC,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAlD;AACAC,MAAM,CAACC,cAAP,CAAsBC,MAAtB,CAA6B,kBAA7B,EAAiD,cAAcC,qBAAd,CAAyB;;aAE7DC,UAAX,GAAwB;WACf;MACLC,OAAO,EAAE;QACPC,IAAI,EAAEC;OAFH;MAILC,KAAK,EAAE;QACLF,IAAI,EAAEG;OALH;MAOLC,MAAM,EAAE;QACNJ,IAAI,EAAEK;OARH;MAULC,OAAO,EAAE;QACPN,IAAI,EAAEO;;KAXV;;;EAgBFC,WAAW,GAAG;;SAEPT,OAAL,GAAe,EAAf;SACKG,KAAL,GAAa,KAAb;SACKE,MAAL,GAAcK,SAAd;SACKH,OAAL,GAAeG,SAAf;;;EAGFC,YAAY,CAACC,kBAAD,EAAqB;SAC1BC,MAAL,GAAc,KAAKC,UAAL,CAAgBC,cAAhB,CAA+B,QAA/B,CAAd;UACM;MACJR;QACE,IAFJ;;QAIIA,OAAJ,EAAa;MACXS,OAAO,CAACC,GAAR,CAAYV,OAAO,CAACW,GAAR,CAAYC,IAAI,IAAIvB,cAAc,CAACwB,WAAf,CAA2BD,IAA3B,CAApB,CAAZ,EAAmEE,IAAnE,CAAwE,MAAM5B,OAAO,CAACC,GAAR,CAAY,2CAAZ,CAA9E;;;;EAIJ4B,iBAAiB,GAAG;UACZA,iBAAN;;QAEI,KAAKnB,KAAT,EAAgB;WACToB,cAAL,GAAsB,MAAM,KAAKC,IAAL,EAA5B;;WAEKC,eAAL,GAAuB,MAAM,KAAKC,IAAL,EAA7B;;MAEAnC,QAAQ,CAACC,gBAAT,CAA0B,gBAA1B,EAA4C,KAAK+B,cAAjD;MACAhC,QAAQ,CAACC,gBAAT,CAA0B,iBAA1B,EAA6C,KAAKiC,eAAlD;;;;EAIJE,oBAAoB,GAAG;UACfA,oBAAN;;QAEI,KAAKxB,KAAT,EAAgB;MACdZ,QAAQ,CAACqC,mBAAT,CAA6B,gBAA7B,EAA+C,KAAKL,cAApD;MACAhC,QAAQ,CAACqC,mBAAT,CAA6B,iBAA7B,EAAgD,KAAKH,eAArD;WACKF,cAAL,GAAsBb,SAAtB;WACKe,eAAL,GAAuBf,SAAvB;;;;aAIOmB,MAAX,GAAoB;;WAEXC,cAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SAAX;GAhEsE;;;EA4HxEC,MAAM,GAAG;UACD;MACJ/B;QACE,IAFJ;WAGOgC,YAAK;;;0BAGUhC,OAAQ;;;;sBAIZ,KAAKiC,kBAAL,EAA0B;;;SAP5C;;;EAaFA,kBAAkB,GAAG;UACb;MACJ9B,KADI;MAEJE;QACE,IAHJ;;QAKIF,KAAJ,EAAW;UACLE,MAAJ,EAAY;eACH2B,YAAK,yCAAwC3B,MAAO,uBAA3D;OADF,MAEO;eACE2B,YAAK,kDAAZ;;KAJJ,MAMO;aACEA,YAAK,EAAZ;;;;EAIJE,MAAM,GAAG;SACFR,IAAL;;QAEI,KAAKvB,KAAT,EAAgB;WACTW,UAAL,CAAgBC,cAAhB,CAA+B,OAA/B,EAAwCmB,MAAxC;;;;EAIJR,IAAI,GAAG;UACC;MACJb;QACE,IAFJ;IAGAA,MAAM,CAACsB,SAAP,CAAiBC,MAAjB,CAAwB,QAAxB;;;EAGFZ,IAAI,GAAG;UACC;MACJX;QACE,IAFJ;IAGAA,MAAM,CAACsB,SAAP,CAAiBE,GAAjB,CAAqB,QAArB;;;CAjLJ"}